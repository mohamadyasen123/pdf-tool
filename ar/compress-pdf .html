<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Ø¶ØºØ· Ù…Ù„ÙØ§Øª PDF Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† Ù…Ø¬Ø§Ù†Ù‹Ø§ | PDF Masterly</title>
    <meta name="description" content="ØªÙ‚Ù„ÙŠÙ„ Ø­Ø¬Ù… Ù…Ù„ÙØ§Øª PDF Ù…Ø¬Ø§Ù†Ù‹Ø§ ÙˆØ¨Ø£Ù…Ø§Ù† ØªØ§Ù… Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ø¨Ø¯ÙˆÙ† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©.">

    <link rel="icon" href="icon/icon.png" type="image/png">

    <style>
        :root {
            --accent-grad: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            --primary: #10b981;
            --text-dark: #0f172a;
        }
        body { font-family: 'Segoe UI', Tahoma, Arial, sans-serif; background-color: #f8fafc; color: #334155; margin:0; padding:0; direction: rtl; }
        .navbar { background:white; padding:15px 50px; box-shadow:0 2px 10px rgba(0,0,0,0.05); }
        .navbar a { text-decoration:none; color: var(--primary); font-weight:bold; font-size:1.2rem; }
        .hero { text-align:center; padding:80px 20px; background:white; }
        h1 { font-size:3rem; color: var(--text-dark); margin-bottom:10px; }
        .hero p { font-size:1.25rem; color:#64748b; margin-bottom:40px; }
        .tool-card { max-width:800px; margin:-60px auto 40px; background:white; padding:50px; border-radius:30px; box-shadow:0 25px 50px -12px rgba(0,0,0,0.1); border:1px solid #e2e8f0; text-align:center; }
        .drop-zone { border:3px dashed #cbd5e1; padding:60px 20px; border-radius:20px; cursor:pointer; transition:0.4s; background:#fafafa; }
        .drop-zone:hover { border-color: var(--primary); background:#f0fdf4; }
        #compressBtn { background:var(--accent-grad); color:white; border:none; padding:20px 50px; border-radius:15px; font-size:1.2rem; font-weight:700; cursor:pointer; width:100%; margin-top:30px; display:none; transition:0.3s; box-shadow:0 10px 15px -3px rgba(16,185,129,0.4); }
        #compressBtn:hover { transform: scale(1.02); }
        .status-box { margin-top:20px; padding:15px; border-radius:12px; background:#f1f5f9; display:none; }
        .content-section { max-width:900px; margin:80px auto; padding:0 20px; }
        .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:40px; margin-top:50px; }
        .card-info { background:white; padding:30px; border-radius:20px; box-shadow:0 4px 6px rgba(0,0,0,0.02); }
        .card-info h3 { color: var(--primary); margin-top:0; }
    </style>
</head>

<body>

<nav class="navbar">
    <a href="index.html">PDF Masterly</a>
</nav>

<div class="hero">
    <h1>Ø¶ØºØ· Ù…Ù„ÙØ§Øª PDF Ø£ÙˆÙ†Ù„Ø§ÙŠÙ†</h1>
    <p>Ù‚Ù„Ù„ Ø­Ø¬Ù… Ù…Ù„ÙØ§Øª PDF Ø¨Ø¯ÙˆÙ† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ¨Ø£Ø³Ø±Ø¹ Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ÙƒÙ†Ø©.</p>
</div>

<div class="tool-card">
    <div class="drop-zone" onclick="document.getElementById('pdfInput').click()">
        <input type="file" id="pdfInput" accept=".pdf" style="display:none;">
        <p id="fileNameDisplay" style="font-weight:600;"></p>
        <p id="sizeInfo" style="margin:0; font-weight:500;"></p>
    </div>

    <div id="statusBox" class="status-box"></div>

    <button id="compressBtn">Ø¶ØºØ· Ø§Ù„Ù…Ù„Ù ÙˆØªØ­Ù…ÙŠÙ„Ù‡</button>
</div>

<div class="content-section">
    <h2>Ù„Ù…Ø§Ø°Ø§ ØªØ¶ØºØ· Ù…Ù„ÙØ§Øª PDFØŸ</h2>
    <p>Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ÙŠØµØ¹Ø¨ Ù…Ø´Ø§Ø±ÙƒØªÙ‡Ø§ Ø£Ùˆ Ø±ÙØ¹Ù‡Ø§. Ø£Ø¯Ø§ØªÙ†Ø§ ØªÙ‚Ù„Ù„ Ø§Ù„Ø­Ø¬Ù… Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¯Ø© Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§Ù„ØªØ®Ø²ÙŠÙ†.</p>

    <div class="grid">
        <div class="card-info"><h3>ğŸ“‰ ØªÙ‚Ù„ÙŠÙ„ ÙØ¹Ù‘Ø§Ù„</h3><p>ØªÙ‚Ù„ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø³Ø¨Ø© ÙƒØ¨ÙŠØ±Ø© Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¶ÙˆØ­.</p></div>
        <div class="card-info"><h3>ğŸ”’ Ø£Ù…Ø§Ù† ÙƒØ§Ù…Ù„</h3><p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª ØªØªÙ… Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ Ø¨Ø¯ÙˆÙ† Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª.</p></div>
        <div class="card-info"><h3>â˜ï¸ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©</h3><p>Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ.</p></div>
    </div>
</div>

<script src="gs/gs-worker.js"></script>
<script>
    const pdfInput = document.getElementById('pdfInput');
    const compressBtn = document.getElementById('compressBtn');
    const fileNameDisplay = document.getElementById('fileNameDisplay');
    const sizeInfo = document.getElementById('sizeInfo');
    const statusBox = document.getElementById('statusBox');
    let selectedFile = null;

    pdfInput.addEventListener('change', function () {
        if(this.files.length>0){
            selectedFile = this.files[0];
            fileNameDisplay.textContent = "Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø®ØªØ§Ø±: "+selectedFile.name;
            sizeInfo.textContent = "Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£ØµÙ„ÙŠ: "+(selectedFile.size/1024/1024).toFixed(2)+" Ù…ÙŠØºØ§Ø¨Ø§ÙŠØª";
            compressBtn.style.display="block";
            statusBox.style.display="block";
        }
    });

    compressBtn.addEventListener('click', async ()=>{
        if(!selectedFile) return;
        compressBtn.disabled=true;
        compressBtn.textContent="Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¶ØºØ·â€¦";
        statusBox.textContent="Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¶ØºØ·";

        try{
            const arrayBuffer = await selectedFile.arrayBuffer();
            const gs = await GS.init(); // GS Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ gs-worker.js
            const result = await gs.run(arrayBuffer,{
                args:[
                    "-sDEVICE=pdfwrite",
                    "-dCompatibilityLevel=1.4",
                    "-dPDFSETTINGS=/ebook",
                    "-dNOPAUSE",
                    "-dQUIET",
                    "-dBATCH",
                    "-sOutputFile=output.pdf",
                    "input.pdf"
                ]
            });
            const blob = new Blob([result], {type:"application/pdf"});
            const newSize=(blob.size/1024/1024).toFixed(2);
            const a=document.createElement("a");
            a.href=URL.createObjectURL(blob);
            a.download="compressed_"+selectedFile.name;
            a.click();
            statusBox.textContent="ØªÙ… Ø§Ù„Ø¶ØºØ· âœ” Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯: "+newSize+" Ù…ÙŠØºØ§Ø¨Ø§ÙŠØª";
            compressBtn.textContent="Ø¶ØºØ· Ø§Ù„Ù…Ù„Ù ÙˆØªØ­Ù…ÙŠÙ„Ù‡";
            compressBtn.disabled=false;
        }catch(err){
            console.error(err);
            statusBox.textContent="Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¶ØºØ·.";
            compressBtn.disabled=false;
            compressBtn.textContent="Ø¶ØºØ· Ø§Ù„Ù…Ù„Ù ÙˆØªØ­Ù…ÙŠÙ„Ù‡";
        }
    });
</script>

</body>
</html>
